// Advanced Chatbot with Multi-language Support
class MediBot {
    constructor() {
        this.responses = {
            en: {
                greetings: [
                    "Hello! I'm MediBot, your health assistant. How can I help you today?",
                    "Hi there! I'm here to help with your health questions.",
                    "Welcome to MediCare Plus! How can I assist you?"
                ],
                
                // Common medical queries
                fever: [
                    "For fever, drink plenty of fluids, rest, and take temperature regularly. If fever exceeds 103┬░F or lasts more than 3 days, consult a doctor immediately.",
                    "Fever symptoms can be managed with rest, hydration, and over-the-counter medications. Seek medical help if symptoms worsen."
                ],
                
                headache: [
                    "For headaches, try resting in a dark room, apply cold compress, stay hydrated. If severe or persistent, book a consultation with our doctors.",
                    "Headache relief: rest, hydration, gentle massage. Avoid screens and loud sounds. Contact us if pain is severe."
                ],
                
                cough: [
                    "For cough relief, drink warm water with honey, avoid cold drinks, use steam inhalation. If cough persists more than a week, see a doctor.",
                    "Persistent cough needs attention. Try warm fluids, honey, and humid air. Book video consultation if symptoms worsen."
                ],
                
                // Emergency responses
                emergency: [
                    "ЁЯЪи For medical emergencies, call:\nтАв Medical Emergency: 102\nтАв Ambulance: 108\nтАв Fire: 101\nтАв Police: 100\n\nOr click Emergency button for Punjab-specific contacts."
                ],
                
                // Service information
                consultation: [
                    "Our video consultation service connects you with certified doctors 24/7. Book through our platform for secure, professional medical advice.",
                    "Video consultations are available with our expert doctors. Click 'Book Video Consultation' to get started."
                ],
                
                prescription: [
                    "Digital prescriptions are sent directly to your device after consultation. They're accepted at all major pharmacies and easy to share.",
                    "Get digital prescriptions from our doctors - secure, convenient, and accepted everywhere."
                ],
                
                // Default responses
                default: [
                    "I understand you need help. Can you please be more specific about your health concern?",
                    "I'm here to help with health-related questions. Could you provide more details?",
                    "For specific medical advice, I recommend booking a video consultation with our doctors."
                ],
                
                thankyou: [
                    "You're welcome! Remember, I'm here 24/7 for any health questions.",
                    "Happy to help! Stay healthy and don't hesitate to reach out anytime."
                ]
            },
            
            hi: {
                greetings: [
                    "рдирдорд╕реНрддреЗ! рдореИрдВ рдореЗрдбрд┐рдмреЙрдЯ рд╣реВрдВ, рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рд╕реНрдереНрдп рд╕рд╣рд╛рдпрдХред рдЖрдЬ рдореИрдВ рдЖрдкрдХреА рдХреИрд╕реЗ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ?",
                    "рд╣реИрд▓реЛ! рдореИрдВ рдЖрдкрдХреЗ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдкреНрд░рд╢реНрдиреЛрдВ рдореЗрдВ рдорджрдж рдХреЗ рд▓рд┐рдП рдпрд╣рд╛рдВ рд╣реВрдВред",
                    "рдореЗрдбрд┐рдХреЗрдпрд░ рдкреНрд▓рд╕ рдореЗрдВ рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рдЧрдд рд╣реИ! рдореИрдВ рдЖрдкрдХреА рдХреИрд╕реЗ рд╕рд╣рд╛рдпрддрд╛ рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ?"
                ],
                
                fever: [
                    "рдмреБрдЦрд╛рд░ рдХреЗ рд▓рд┐рдП, рдкрд░реНрдпрд╛рдкреНрдд рддрд░рд▓ рдкрджрд╛рд░реНрде рдкрд┐рдПрдВ, рдЖрд░рд╛рдо рдХрд░реЗрдВ, рдФрд░ рдирд┐рдпрдорд┐рдд рд░реВрдк рд╕реЗ рддрд╛рдкрдорд╛рди рд▓реЗрдВред рдпрджрд┐ рдмреБрдЦрд╛рд░ 103┬░F рд╕реЗ рдЕрдзрд┐рдХ рд╣реЛ рдпрд╛ 3 рджрд┐рди рд╕реЗ рдЬреНрдпрд╛рджрд╛ рд░рд╣реЗ рддреЛ рддреБрд░рдВрдд рдбреЙрдХреНрдЯрд░ рд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░реЗрдВред",
                    "рдмреБрдЦрд╛рд░ рдХреЗ рд▓рдХреНрд╖рдгреЛрдВ рдХреЛ рдЖрд░рд╛рдо, рд╣рд╛рдЗрдбреНрд░реЗрд╢рди, рдФрд░ рдУрд╡рд░-рдж-рдХрд╛рдЙрдВрдЯрд░ рджрд╡рд╛рдУрдВ рд╕реЗ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдпрджрд┐ рд▓рдХреНрд╖рдг рдмрд┐рдЧрдбрд╝реЗрдВ рддреЛ рдЪрд┐рдХрд┐рддреНрд╕рд╛ рд╕рд╣рд╛рдпрддрд╛ рд▓реЗрдВред"
                ],
                
                headache: [
                    "рд╕рд┐рд░рджрд░реНрдж рдХреЗ рд▓рд┐рдП, рдЕрдВрдзреЗрд░реЗ рдХрдорд░реЗ рдореЗрдВ рдЖрд░рд╛рдо рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВ, рдардВрдбреА рд╕рд┐рдХрд╛рдИ рдХрд░реЗрдВ, рд╣рд╛рдЗрдбреНрд░реЗрдЯреЗрдб рд░рд╣реЗрдВред рдпрджрд┐ рдЧрдВрднреАрд░ рдпрд╛ рд▓рдЧрд╛рддрд╛рд░ рд╣реЛ рддреЛ рд╣рдорд╛рд░реЗ рдбреЙрдХреНрдЯрд░реЛрдВ рдХреЗ рд╕рд╛рде рдкрд░рд╛рдорд░реНрд╢ рдмреБрдХ рдХрд░реЗрдВред",
                    "рд╕рд┐рд░рджрд░реНрдж рд╕реЗ рд░рд╛рд╣рдд: рдЖрд░рд╛рдо, рд╣рд╛рдЗрдбреНрд░реЗрд╢рди, рд╣рд▓реНрдХреА рдорд╛рд▓рд┐рд╢ред рд╕реНрдХреНрд░реАрди рдФрд░ рддреЗрдЬ рдЖрд╡рд╛рдЬ рд╕реЗ рдмрдЪреЗрдВред рджрд░реНрдж рдЧрдВрднреАрд░ рд╣реЛ рддреЛ рд╣рдорд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░реЗрдВред"
                ],
                
                cough: [
                    "рдЦрд╛рдВрд╕реА рд╕реЗ рд░рд╛рд╣рдд рдХреЗ рд▓рд┐рдП, рд╢рд╣рдж рдХреЗ рд╕рд╛рде рдЧрд░реНрдо рдкрд╛рдиреА рдкрд┐рдПрдВ, рдардВрдбреЗ рдкреЗрдп рд╕реЗ рдмрдЪреЗрдВ, рднрд╛рдк рд▓реЗрдВред рдпрджрд┐ рдЦрд╛рдВрд╕реА рдПрдХ рд╕рдкреНрддрд╛рд╣ рд╕реЗ рдЕрдзрд┐рдХ рд░рд╣реЗ рддреЛ рдбреЙрдХреНрдЯрд░ рд╕реЗ рдорд┐рд▓реЗрдВред",
                    "рд▓рдЧрд╛рддрд╛рд░ рдЦрд╛рдВрд╕реА рдкрд░ рдзреНрдпрд╛рди рдХреА рдЬрд░реВрд░рдд рд╣реИред рдЧрд░реНрдо рддрд░рд▓ рдкрджрд╛рд░реНрде, рд╢рд╣рдж, рдФрд░ рдирдо рд╣рд╡рд╛ рдХрд╛ рд╕реЗрд╡рди рдХрд░реЗрдВред рд▓рдХреНрд╖рдг рдмрд┐рдЧрдбрд╝рдиреЗ рдкрд░ рд╡реАрдбрд┐рдпреЛ рдкрд░рд╛рдорд░реНрд╢ рдмреБрдХ рдХрд░реЗрдВред"
                ],
                
                emergency: [
                    "ЁЯЪи рдЪрд┐рдХрд┐рддреНрд╕рд╛ рдЖрдкрд╛рддрдХрд╛рд▓ рдХреЗ рд▓рд┐рдП, рдХреЙрд▓ рдХрд░реЗрдВ:\nтАв рдореЗрдбрд┐рдХрд▓ рдЗрдорд░рдЬреЗрдВрд╕реА: 102\nтАв рдПрдореНрдмреБрд▓реЗрдВрд╕: 108\nтАв рдлрд╛рдпрд░ рдмреНрд░рд┐рдЧреЗрдб: 101\nтАв рдкреБрд▓рд┐рд╕: 100\n\nрдпрд╛ рдкрдВрдЬрд╛рдм-рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕рдВрдкрд░реНрдХреЛрдВ рдХреЗ рд▓рд┐рдП рдЗрдорд░рдЬреЗрдВрд╕реА рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред"
                ],
                
                consultation: [
                    "рд╣рдорд╛рд░реА рд╡реАрдбрд┐рдпреЛ рдкрд░рд╛рдорд░реНрд╢ рд╕реЗрд╡рд╛ рдЖрдкрдХреЛ рдкреНрд░рдорд╛рдгрд┐рдд рдбреЙрдХреНрдЯрд░реЛрдВ рд╕реЗ 24/7 рдЬреЛрдбрд╝рддреА рд╣реИред рд╕реБрд░рдХреНрд╖рд┐рдд, рдкреЗрд╢реЗрд╡рд░ рдЪрд┐рдХрд┐рддреНрд╕рд╛ рд╕рд▓рд╛рд╣ рдХреЗ рд▓рд┐рдП рд╣рдорд╛рд░реЗ рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдмреБрдХ рдХрд░реЗрдВред",
                    "рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдбреЙрдХреНрдЯрд░реЛрдВ рдХреЗ рд╕рд╛рде рд╡реАрдбрд┐рдпреЛ рдкрд░рд╛рдорд░реНрд╢ рдЙрдкрд▓рдмреНрдз рд╣реИред рд╢реБрд░реБрдЖрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП 'рд╡реАрдбрд┐рдпреЛ рдкрд░рд╛рдорд░реНрд╢ рдмреБрдХ рдХрд░реЗрдВ' рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред"
                ],
                
                prescription: [
                    "рдкрд░рд╛рдорд░реНрд╢ рдХреЗ рдмрд╛рдж рдбрд┐рдЬрд┐рдЯрд▓ рдиреБрд╕реНрдЦреЗ рд╕реАрдзреЗ рдЖрдкрдХреЗ рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░ рднреЗрдЬреЗ рдЬрд╛рддреЗ рд╣реИрдВред рд╡реЗ рд╕рднреА рдкреНрд░рдореБрдЦ рдлрд╛рд░реНрдореЗрд╕рд┐рдпреЛрдВ рдореЗрдВ рд╕реНрд╡реАрдХрд╛рд░ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ рдФрд░ рд╕рд╛рдЭрд╛ рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИред",
                    "рд╣рдорд╛рд░реЗ рдбреЙрдХреНрдЯрд░реЛрдВ рд╕реЗ рдбрд┐рдЬрд┐рдЯрд▓ рдиреБрд╕реНрдЦреЗ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ - рд╕реБрд░рдХреНрд╖рд┐рдд, рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ, рдФрд░ рд╣рд░ рдЬрдЧрд╣ рд╕реНрд╡реАрдХреГрддред"
                ],
                
                default: [
                    "рдореИрдВ рд╕рдордЭрддрд╛ рд╣реВрдВ рдХрд┐ рдЖрдкрдХреЛ рдорджрдж рдЪрд╛рд╣рд┐рдПред рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреА рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЪрд┐рдВрддрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ?",
                    "рдореИрдВ рд╕реНрд╡рд╛рд╕реНрдереНрдп рд╕рдВрдмрдВрдзреА рдкреНрд░рд╢реНрдиреЛрдВ рдореЗрдВ рдорджрдж рдХреЗ рд▓рд┐рдП рдпрд╣рд╛рдВ рд╣реВрдВред рдХреНрдпрд╛ рдЖрдк рдЕрдзрд┐рдХ рд╡рд┐рд╡рд░рдг рджреЗ рд╕рдХрддреЗ рд╣реИрдВ?",
                    "рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЪрд┐рдХрд┐рддреНрд╕рд╛ рд╕рд▓рд╛рд╣ рдХреЗ рд▓рд┐рдП, рдореИрдВ рд╣рдорд╛рд░реЗ рдбреЙрдХреНрдЯрд░реЛрдВ рдХреЗ рд╕рд╛рде рд╡реАрдбрд┐рдпреЛ рдкрд░рд╛рдорд░реНрд╢ рдмреБрдХ рдХрд░рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХрд░рддрд╛ рд╣реВрдВред"
                ],
                
                thankyou: [
                    "рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рдЧрдд рд╣реИ! рдпрд╛рдж рд░рдЦреЗрдВ, рдореИрдВ рдХрд┐рд╕реА рднреА рд╕реНрд╡рд╛рд╕реНрдереНрдп рдкреНрд░рд╢реНрди рдХреЗ рд▓рд┐рдП 24/7 рдпрд╣рд╛рдВ рд╣реВрдВред",
                    "рдорджрдж рдХрд░рдХреЗ рдЦреБрд╢реА рд╣реБрдИ! рд╕реНрд╡рд╕реНрде рд░рд╣реЗрдВ рдФрд░ рдХрднреА рднреА рд╕рдВрдкрд░реНрдХ рдХрд░рдиреЗ рдореЗрдВ рдЭрд┐рдЭрдХ рди рдХрд░реЗрдВред"
                ]
            },
            
            pa: {
                greetings: [
                    "ри╕ридри┐ ри╕рйНри░рйА риЕриХри╛ри▓! риорйИриВ риорйИрибрйАримри╛риЯ ри╣ри╛риВ, ридрйБри╣ри╛рибри╛ ри╕ри┐ри╣рид ри╕ри╣ри╛риЗриХред риЕрй▒риЬ риорйИриВ ридрйБри╣ри╛рибрйА риХри┐ри╡рйЗриВ риорижриж риХри░ ри╕риХрижри╛ ри╣ри╛риВ?",
                    "риириори╕риХри╛ри░! риорйИриВ ридрйБри╣ри╛рибрйЗ ри╕ри┐ри╣рид ри╕ри╡ри╛ри▓ри╛риВ ри╡ри┐рй▒риЪ риорижриж ри▓риИ риЗрй▒риерйЗ ри╣ри╛риВред",
                    "риорйИрибрйАриХрйЗриЕри░ рикри▓рй▒ри╕ ри╡ри┐рй▒риЪ ридрйБри╣ри╛рибри╛ ри╕рйБриЖриЧрид ри╣рйИ! риорйИриВ ридрйБри╣ри╛рибрйА риХри┐ри╕ ридри░рйНри╣ри╛риВ ри╕ри╣ри╛риЗридри╛ риХри░ ри╕риХрижри╛ ри╣ри╛риВ?"
                ],
                
                fever: [
                    "римрйБриЦри╝ри╛ри░ ри▓риИ, римри╣рйБрид ри╕ри╛ри░ри╛ ридри░ри▓ рикрижри╛ри░рие рикрйАриУ, риЖри░ри╛рио риХри░рйЛ, риЕридрйЗ риири┐риприори┐рид ридри╛рикриори╛рии ри▓риУред риЬрйЗ римрйБриЦри╝ри╛ри░ 103┬░F ридрйЛриВ ри╡рй▒риз ри╣рйЛри╡рйЗ риЬри╛риВ 3 рижри┐риири╛риВ ридрйЛриВ риЬри╝ри┐риЖрижри╛ ри░ри╣рйЗ ридри╛риВ ридрйБри░рй░рид рибри╛риХриЯри░ риири╛ри▓ ри╕рй░рикри░риХ риХри░рйЛред",
                    "римрйБриЦри╝ри╛ри░ рижрйЗ ри▓рй▒риЫригри╛риВ риирйВрй░ риЖри░ри╛рио, рикри╛ригрйА, риЕридрйЗ римри┐риири╛риВ риирйБри╕риЦри╝рйЗ рижрйАриЖриВ рижри╡ри╛риИриЖриВ риири╛ри▓ риири┐рипрй░ридри░ри┐рид риХрйАридри╛ риЬри╛ ри╕риХрижри╛ ри╣рйИред риЬрйЗ ри▓рй▒риЫриг ри╡ри┐риЧрйЬрии ридри╛риВ риорйИрибрйАриХри▓ риорижриж ри▓риУред"
                ],
                
                headache: [
                    "ри╕ри┐ри░ рижри░риж ри▓риИ, ри╣риирйЗри░рйЗ риХриори░рйЗ ри╡ри┐рй▒риЪ риЖри░ри╛рио риХри░рии рижрйА риХрйЛри╕ри╝ри┐ри╕ри╝ риХри░рйЛ, риарй░риври╛ ри╕ри┐риХри╛риУ, рикри╛ригрйА рикрйАриВрижрйЗ ри░ри╣рйЛред риЬрйЗ риЧрй░ринрйАри░ риЬри╛риВ ри▓риЧри╛ридри╛ри░ ри╣рйЛри╡рйЗ ридри╛риВ ри╕ри╛рибрйЗ рибри╛риХриЯри░ри╛риВ риири╛ри▓ ри╕ри▓ри╛ри╣ римрйБриХ риХри░рйЛред",
                    "ри╕ри┐ри░ рижри░риж ридрйЛриВ ри░ри╛ри╣рид: риЖри░ри╛рио, рикри╛ригрйА, ри╣рйМри▓рйА риори╕ри╛риЬред ри╕риХрйНри░рйАрии риЕридрйЗ ридрйЗриЬри╝ риЖри╡ри╛риЬри╝ ридрйЛриВ римриЪрйЛред рижри░риж риЧрй░ринрйАри░ ри╣рйЛри╡рйЗ ридри╛риВ ри╕ри╛рибрйЗ риири╛ри▓ ри╕рй░рикри░риХ риХри░рйЛред"
                ],
                
                cough: [
                    "риЦрй░риШ рижрйА ри░ри╛ри╣рид ри▓риИ, ри╕ри╝ри╣ри┐риж риири╛ри▓ риЧри░рио рикри╛ригрйА рикрйАриУ, риарй░риврйЗ рикрйАриг ри╡ри╛ри▓рйЗ ридрйЛриВ римриЪрйЛ, ринри╛рил ри▓риУред риЬрйЗ риЦрй░риШ риЗрй▒риХ ри╣рилри╝ридрйЗ ридрйЛриВ ри╡рй▒риз ри░ри╣рйЗ ридри╛риВ рибри╛риХриЯри░ риирйВрй░ риори┐ри▓рйЛред",
                    "ри▓риЧри╛ридри╛ри░ риЦрй░риШ ридрйЗ ризри┐риЖрии рижрйА ри▓рйЛрйЬ ри╣рйИред риЧри░рио ридри░ри▓ рикрижри╛ри░рие, ри╕ри╝ри╣ри┐риж, риЕридрйЗ риириорйА ри╡ри╛ри▓рйА ри╣ри╡ри╛ рижри╛ ри╕рйЗри╡рии риХри░рйЛред ри▓рй▒риЫриг ри╡ри┐риЧрйЬрии ридрйЗ ри╡рйАрибрйАриУ ри╕ри▓ри╛ри╣ римрйБриХ риХри░рйЛред"
                ],
                
                emergency: [
                    "ЁЯЪи риорйИрибрйАриХри▓ риРриори░риЬрйИриВри╕рйА ри▓риИ, риХри╛ри▓ риХри░рйЛ:\nтАв риорйИрибрйАриХри▓ риРриори░риЬрйИриВри╕рйА: 102\nтАв риРриВримрйВри▓рйИриВри╕: 108\nтАв рилри╛риЗри░ римрйНри░ри┐риЧрйЗриб: 101\nтАв рикрйБри▓ри┐ри╕: 100\n\nриЬри╛риВ рикрй░риЬри╛рим-риЦри╛ри╕ ри╕рй░рикри░риХри╛риВ ри▓риИ риРриори░риЬрйИриВри╕рйА римриЯрии ридрйЗ риХри▓ри┐риХ риХри░рйЛред"
                ],
                
                consultation: [
                    "ри╕ри╛рибрйА ри╡рйАрибрйАриУ ри╕ри▓ри╛ри╣ ри╕рйЗри╡ри╛ ридрйБри╣ри╛риирйВрй░ рикрйНри░риори╛ригри┐рид рибри╛риХриЯри░ри╛риВ риири╛ри▓ 24/7 риЬрйЛрйЬрижрйА ри╣рйИред ри╕рйБри░рй▒риЦри┐рид, рикрйЗри╕ри╝рйЗри╡ри░ риорйИрибрйАриХри▓ ри╕ри▓ри╛ри╣ ри▓риИ ри╕ри╛рибрйЗ рикри▓рйЗриЯрилри╛ри░рио ри░ри╛ри╣рйАриВ римрйБриХ риХри░рйЛред",
                    "ри╕ри╛рибрйЗ риори╛ри╣ри░ рибри╛риХриЯри░ри╛риВ риири╛ри▓ ри╡рйАрибрйАриУ ри╕ри▓ри╛ри╣ риЙрикри▓римриз ри╣рйИред ри╕ри╝рйБри░рйВриЖрид риХри░рии ри▓риИ 'ри╡рйАрибрйАриУ ри╕ри▓ри╛ри╣ римрйБриХ риХри░рйЛ' ридрйЗ риХри▓ри┐риХ риХри░рйЛред"
                ],
                
                prescription: [
                    "ри╕ри▓ри╛ри╣ ридрйЛриВ римри╛риЕриж рибри┐риЬри┐риЯри▓ риирйБри╕риЦри╝рйЗ ри╕ри┐рй▒ризрйЗ ридрйБри╣ри╛рибрйЗ рибри┐ри╡ри╛риИри╕ ридрйЗ ринрйЗриЬрйЗ риЬри╛риВрижрйЗ ри╣рииред риЗри╣ ри╕ри╛ри░рйЗ риорйБрй▒риЦ рижри╡ри╛риЦри╛риири┐риЖриВ ри╡ри┐рй▒риЪ ри╕ри╡рйАриХри╛ри░ риХрйАридрйЗ риЬри╛риВрижрйЗ ри╣рии риЕридрйЗ ри╕ри╛риВриЭрйЗ риХри░риирйЗ риЖри╕ри╛рии ри╣рииред",
                    "ри╕ри╛рибрйЗ рибри╛риХриЯри░ри╛риВ ридрйЛриВ рибри┐риЬри┐риЯри▓ риирйБри╕риЦри╝рйЗ рикрйНри░ри╛рикрид риХри░рйЛ - ри╕рйБри░рй▒риЦри┐рид, ри╕ри╣рйВри▓рид ринри░рикрйВри░, риЕридрйЗ ри╣ри░ риЬриЧрйНри╣ри╛ ри╕ри╡рйАриХри╛ри░ри┐риЖред"
                ],
                
                default: [
                    "риорйИриВ ри╕риориЭрижри╛ ри╣ри╛риВ риХри┐ ридрйБри╣ри╛риирйВрй░ риорижриж риЪри╛ри╣рйАрижрйА ри╣рйИред риХрйА ридрйБри╕рйАриВ риЖрикригрйА ри╕ри┐ри╣рид риЪри┐рй░ридри╛ римри╛ри░рйЗ ри╣рйЛри░ риЦри╛ри╕ ри╣рйЛ ри╕риХрижрйЗ ри╣рйЛ?",
                    "риорйИриВ ри╕ри┐ри╣рид ри╕рй░римрй░ризрйА рикрйНри░ри╕ри╝риири╛риВ ри╡ри┐рй▒риЪ риорижриж ри▓риИ риЗрй▒риерйЗ ри╣ри╛риВред риХрйА ридрйБри╕рйАриВ ри╣рйЛри░ ри╡рйЗри░ри╡рйЗ рижрйЗ ри╕риХрижрйЗ ри╣рйЛ?",
                    "риЦри╛ри╕ риорйИрибрйАриХри▓ ри╕ри▓ри╛ри╣ ри▓риИ, риорйИриВ ри╕ри╛рибрйЗ рибри╛риХриЯри░ри╛риВ риири╛ри▓ ри╡рйАрибрйАриУ ри╕ри▓ри╛ри╣ римрйБриХ риХри░рии рижрйА ри╕ри┐рилри╝ри╛ри░ри┐ри╕ри╝ риХри░рижри╛ ри╣ри╛риВред"
                ],
                
                thankyou: [
                    "ридрйБри╣ри╛рибри╛ ри╕рйБриЖриЧрид ри╣рйИ! рипри╛риж ри░рй▒риЦрйЛ, риорйИриВ риХри┐ри╕рйЗ ри╡рйА ри╕ри┐ри╣рид рикрйНри░ри╕ри╝рии ри▓риИ 24/7 риЗрй▒риерйЗ ри╣ри╛риВред",
                    "риорижриж риХри░риХрйЗ риЦрйБри╕ри╝рйА ри╣рйЛриИ! ри╕ри┐ри╣ридриорй░риж ри░ри╣рйЛ риЕридрйЗ риХрижрйЗ ри╡рйА ри╕рй░рикри░риХ риХри░рии ри╡ри┐рй▒риЪ риЭри┐риЬриХ риири╛ риХри░рйЛред"
                ]
            }
        };
        
        this.currentLanguage = 'en';
        this.isOpen = false;
        this.initializeChatbot();
    }
    
    initializeChatbot() {
        const trigger = document.getElementById('chatbotTrigger');
        const container = document.getElementById('chatbotContainer');
        const closeBtn = document.getElementById('closeChatbot');
        const sendBtn = document.getElementById('sendMessage');
        const input = document.getElementById('chatbotInput');
        
        if (trigger) {
            trigger.addEventListener('click', () => this.toggleChatbot());
        }
        
        if (closeBtn) {
            closeBtn.addEventListener('click', () => this.toggleChatbot());
        }
        
        if (sendBtn) {
            sendBtn.addEventListener('click', () => this.sendMessage());
        }
        
        if (input) {
            input.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    this.sendMessage();
                }
            });
        }
        
        // Listen for language changes
        document.addEventListener('languageChanged', (e) => {
            this.currentLanguage = e.detail.language;
        });
        
        // Set initial language
        this.currentLanguage = localStorage.getItem('selectedLanguage') || 'en';
    }
    
    toggleChatbot() {
        const container = document.getElementById('chatbotContainer');
        if (container) {
            this.isOpen = !this.isOpen;
            container.style.display = this.isOpen ? 'flex' : 'none';
            
            if (this.isOpen) {
                container.classList.add('scale-in');
                this.showInitialMessage();
            }
        }
    }
    
    showInitialMessage() {
        const welcomeMessage = this.getRandomResponse('greetings');
        this.addMessage(welcomeMessage, 'bot');
    }
    
    sendMessage() {
        const input = document.getElementById('chatbotInput');
        const message = input.value.trim();
        
        if (!message) return;
        
        // Add user message
        this.addMessage(message, 'user');
        input.value = '';
        
        // Process and respond
        setTimeout(() => {
            const response = this.processMessage(message);
            this.addMessage(response, 'bot');
        }, 1000);
    }
    
    processMessage(message) {
        const lowerMessage = message.toLowerCase();
        
        // Greeting patterns
        if (this.matchesPatterns(lowerMessage, ['hello', 'hi', 'hey', 'namaste', 'sat sri akal', 'ри╕ридри┐ ри╕рйНри░рйА риЕриХри╛ри▓', 'рдирдорд╕реНрддреЗ'])) {
            return this.getRandomResponse('greetings');
        }
        
        // Emergency patterns
        if (this.matchesPatterns(lowerMessage, ['emergency', 'help', 'urgent', 'ambulance', 'hospital', 'critical', 'рдПрдореНрдмреБрд▓реЗрдВрд╕', 'рдЕрд╕реНрдкрддрд╛рд▓', 'рдЖрдкрд╛рддрдХрд╛рд▓', 'риРриВримрйВри▓рйИриВри╕', 'ри╣ри╕рикридри╛ри▓', 'риРриори░риЬрйИриВри╕рйА'])) {
            return this.getRandomResponse('emergency');
        }
        
        // Fever patterns
        if (this.matchesPatterns(lowerMessage, ['fever', 'temperature', 'hot', 'chills', 'рдмреБрдЦрд╛рд░', 'рддрд╛рдкрдорд╛рди', 'рдардВрдб рд▓рдЧрдирд╛', 'римрйБриЦри╝ри╛ри░', 'ридри╛рикриори╛рии', 'риарй░риб'])) {
            return this.getRandomResponse('fever');
        }
        
        // Headache patterns
        if (this.matchesPatterns(lowerMessage, ['headache', 'head pain', 'migraine', 'рд╕рд┐рд░рджрд░реНрдж', 'рд╕рд┐рд░ рджрд░реНрдж', 'рдорд╛рдЗрдЧреНрд░реЗрди', 'ри╕ри┐ри░ рижри░риж', 'риори╛риИриЧрйНри░рйЗрии'])) {
            return this.getRandomResponse('headache');
        }
        
        // Cough patterns
        if (this.matchesPatterns(lowerMessage, ['cough', 'cold', 'throat', 'khasi', 'рдЦрд╛рдВрд╕реА', 'рдЧрд▓рд╛', 'рдЬреБрдХрд╛рдо', 'риЦрй░риШ', 'риЬри╝рйБриХри╛рио', 'риЧри▓ри╛'])) {
            return this.getRandomResponse('cough');
        }
        
        // Consultation patterns
        if (this.matchesPatterns(lowerMessage, ['consultation', 'doctor', 'appointment', 'video call', 'consult', 'рдкрд░рд╛рдорд░реНрд╢', 'рдбреЙрдХреНрдЯрд░', 'рдЕрдкреЙрдЗрдВрдЯрдореЗрдВрдЯ', 'ри╕ри▓ри╛ри╣', 'рибри╛риХриЯри░', 'риорйБри▓ри╛риХри╛рид'])) {
            return this.getRandomResponse('consultation');
        }
        
        // Prescription patterns
        if (this.matchesPatterns(lowerMessage, ['prescription', 'medicine', 'drugs', 'medication', 'рдиреБрд╕реНрдЦрд╛', 'рджрд╡рд╛', 'рджрд╡рд╛рдИ', 'риирйБри╕риЦри╝ри╛', 'рижри╡ри╛риИ'])) {
            return this.getRandomResponse('prescription');
        }
        
        // Thank you patterns
        if (this.matchesPatterns(lowerMessage, ['thank', 'thanks', 'dhanyawad', 'shukriya', 'рдзрдиреНрдпрд╡рд╛рдж', 'рд╢реБрдХреНрд░рд┐рдпрд╛', 'ризрй░риири╡ри╛риж', 'ри╕ри╝рйБриХри░рйАриЖ'])) {
            return this.getRandomResponse('thankyou');
        }
        
        // Default response
        return this.getRandomResponse('default');
    }
    
    matchesPatterns(message, patterns) {
        return patterns.some(pattern => message.includes(pattern));
    }
    
    getRandomResponse(category) {
        const responses = this.responses[this.currentLanguage][category];
        if (!responses || responses.length === 0) {
            return this.responses.en[category][0];
        }
        return responses[Math.floor(Math.random() * responses.length)];
    }
    
    addMessage(message, sender) {
        const messagesContainer = document.getElementById('chatbotMessages');
        if (!messagesContainer) return;
        
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${sender}-message slide-up`;
        
        const messageContent = document.createElement('p');
        messageContent.innerHTML = message.replace(/\n/g, '<br>');
        messageDiv.appendChild(messageContent);
        
        messagesContainer.appendChild(messageDiv);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
        
        // Add typing indicator for bot messages
        if (sender === 'bot') {
            messageDiv.classList.add('typing-animation');
        }
    }
}

// Initialize chatbot when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    new MediBot();
});

// Export for use in other files
window.MediBot = MediBot;